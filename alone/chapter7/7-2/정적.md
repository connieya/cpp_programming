# 정적변수

## 정적변수

정적변수는 전역변수와 지역변수의 성격을 동시에 가지는 좀 특별한 기억 부류이다. 
앞의 도표에 기록되어 있는 정적변수의 특징들을 살펴보자

- 선언 위치는 지역변수와 마찬가지로 함수의 선두이다.
- 통용 범위는 지역변수와 마찬가지로 함수 내부로 국한된다.
- 저장 장소는 전역변수가 저장되는 정적 데이터 영역이다.
- 정적 데이터 영역에 저장되므로 프로그램 실행 중에 항상 존재한다.
- 초기값 지정이 없으면 0으로 초기화되고 프로그램 실행시 단 한 번만 초기화된다.

정적변수의 성질을 요약하자면 저장 장소는 전역변수이되 통용 범위는 지역변수라 할 수 있다.
정적 변수를 선언할 때는 반드시 static 이라는 지정자를 붙여야 한다.

```c
#include "stdio.h"

void PrintCount();


int main(void)
{
    int i;
    for (i=0; i<5; i++) {
        PrintCount();
    }
//    count = 5;
//    printf("%d " , count);
}

void PrintCount() {
    static int count = 0 ; // 최초 호출 시 딱 한번 초기화 된다.
    count++;
    printf("저는 %d 번째로 호출 되었습니다.\n",count);
}
```



```c
저는 1 번째로 호출 되었습니다.
저는 2 번째로 호출 되었습니다.
저는 3 번째로 호출 되었습니다.
저는 4 번째로 호출 되었습니다.
저는 5 번째로 호출 되었습니다.
```

count 변수는 PrintCount 함수 내부에서만 사용되므로 이 함수 밖에서는 참조하지 말아야 한다.
하지만 그렇다고 해서 count를 지역변수로 선언해서는 안 되는데 지역변수는 함수가 호출될 때마다
스택에 다시 생성되고 함수가 끝날 때 파괴되어 버리므로 값을 계속 유지할 수 없다. 호출 회수를 기억하는
카운트 변수가 제 기능을 다 할 수 없는 것이다. 또 그럻다고 해서 count를 전역변수로 선언하면 PrintCount 
이 외의 함수에도 이 변수를 참조할 수 있게 되므로 함수의 독립성을 해치게 된다. 
그래서 기억 장소는 전역적이고 통용 범위는 지역적인 정적변수로 선언한 것이다. 정적변수로 선언하면
함수가 끝나도 값이 파괴되지 않고 계속 유지되므로 카운트로 사용할 수 있다. 또한 통용 범위가 
함수 내부로 국한되므로 외부에서 이 변수를 참조할 수 없으며 디버깅시에도 문제가 되지 않고 이 함수를
다른 프로젝트로 가져가 쉽게 재사용할 수도 있다. 

정적변수는 지역변수와 전역변수의 장점을 모두 가지는 조금 특이한 기억 부류이다.
정적변수를 잘 사용하면 구조적으로 튼튼하고 디버깅에도 유리한 좋은 코드를 작성할 수 있다. 

정적변수에서 한 가지 유의할 점은 이 변수가 언제 초기화되는 가 하는점이다.
함두 선두에서 정적변수를 선언하고 있으므로 함수가 호출될 때마다 초기화될 것 같지만
그렇지 않으면 함수가 최초로 호출될 때 단 한 번만 초기화된다.

함수 내부에서 큰 배열을 선언하고 초기화할 때는 초기화 시간을 절약하기 위해 정적으로  선언하여 한 번만
초기화하도록 해야 한다. 그렇지 않으면 함수가 호출될 때마다 큰 배열이 매번 생성, 초기화, 파괴를 반복하므로
느려진다.

